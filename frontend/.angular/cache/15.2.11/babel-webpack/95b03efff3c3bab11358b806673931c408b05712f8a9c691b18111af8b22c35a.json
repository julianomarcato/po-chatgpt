{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../auth.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common/http\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/forms\";\nfunction DashboardComponent_img_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 14);\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"src\", ctx_r0.user == null ? null : ctx_r0.user.photo, i0.ɵɵsanitizeUrl);\n  }\n}\nfunction DashboardComponent_option_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 15);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"uppercase\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ai_r3 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", ai_r3);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(2, 2, ai_r3));\n  }\n}\nfunction DashboardComponent_div_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 16)(1, \"h3\");\n    i0.ɵɵtext(2, \"Resposta:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 17);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r2.response, \" \");\n  }\n}\nexport class DashboardComponent {\n  constructor(authService, router, http) {\n    this.authService = authService;\n    this.router = router;\n    this.http = http;\n    this.ais = [];\n    this.prompt = '';\n    this.selectedAI = 'gpt';\n    this.response = '';\n    this.loading = false;\n  }\n  ngOnInit() {\n    if (!this.authService.isAuthenticated()) {\n      this.router.navigate(['/login']);\n    }\n    this.loadUserInfo();\n    this.loadAIs();\n  }\n  loadUserInfo() {\n    this.http.get('http://localhost:3000/api/user', {\n      withCredentials: true\n    }).subscribe({\n      next: response => {\n        this.user = response.user;\n      },\n      error: () => {\n        this.authService.logout();\n      }\n    });\n  }\n  loadAIs() {\n    this.http.get('http://localhost:3000/api/ais', {\n      withCredentials: true\n    }).subscribe({\n      next: response => {\n        this.ais = response.ais;\n      },\n      error: error => {\n        console.error('Error loading AIs:', error);\n      }\n    });\n  }\n  sendPrompt() {\n    if (!this.prompt.trim()) return;\n    this.loading = true;\n    this.response = '';\n    this.http.post('http://localhost:3000/api/prompt', {\n      prompt: this.prompt,\n      ai: this.selectedAI\n    }, {\n      withCredentials: true\n    }).subscribe({\n      next: response => {\n        this.response = response.resposta;\n        this.loading = false;\n      },\n      error: error => {\n        console.error('Error:', error);\n        this.response = 'Erro ao processar a solicitação';\n        this.loading = false;\n      }\n    });\n  }\n  logout() {\n    this.authService.logout();\n  }\n  static {\n    this.ɵfac = function DashboardComponent_Factory(t) {\n      return new (t || DashboardComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.HttpClient));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: DashboardComponent,\n      selectors: [[\"app-dashboard\"]],\n      decls: 23,\n      vars: 9,\n      consts: [[1, \"dashboard-container\"], [1, \"dashboard-header\"], [1, \"user-info\"], [\"alt\", \"User Photo\", \"class\", \"user-photo\", 3, \"src\", 4, \"ngIf\"], [1, \"logout-btn\", 3, \"click\"], [1, \"chat-container\"], [1, \"ai-selector\"], [\"for\", \"ai-select\"], [\"id\", \"ai-select\", 3, \"ngModel\", \"ngModelChange\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [1, \"prompt-input\"], [\"placeholder\", \"Digite seu prompt aqui...\", \"rows\", \"4\", 3, \"ngModel\", \"ngModelChange\", \"keydown.enter\"], [3, \"disabled\", \"click\"], [\"class\", \"response-container\", 4, \"ngIf\"], [\"alt\", \"User Photo\", 1, \"user-photo\", 3, \"src\"], [3, \"value\"], [1, \"response-container\"], [1, \"response-content\"]],\n      template: function DashboardComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"header\", 1)(2, \"div\", 2);\n          i0.ɵɵtemplate(3, DashboardComponent_img_3_Template, 1, 1, \"img\", 3);\n          i0.ɵɵelementStart(4, \"div\")(5, \"h2\");\n          i0.ɵɵtext(6);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(7, \"p\");\n          i0.ɵɵtext(8);\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(9, \"button\", 4);\n          i0.ɵɵlistener(\"click\", function DashboardComponent_Template_button_click_9_listener() {\n            return ctx.logout();\n          });\n          i0.ɵɵtext(10, \"Sair\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(11, \"div\", 5)(12, \"div\", 6)(13, \"label\", 7);\n          i0.ɵɵtext(14, \"Selecione a IA:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(15, \"select\", 8);\n          i0.ɵɵlistener(\"ngModelChange\", function DashboardComponent_Template_select_ngModelChange_15_listener($event) {\n            return ctx.selectedAI = $event;\n          });\n          i0.ɵɵtemplate(16, DashboardComponent_option_16_Template, 3, 4, \"option\", 9);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(17, \"div\", 10)(18, \"textarea\", 11);\n          i0.ɵɵlistener(\"ngModelChange\", function DashboardComponent_Template_textarea_ngModelChange_18_listener($event) {\n            return ctx.prompt = $event;\n          })(\"keydown.enter\", function DashboardComponent_Template_textarea_keydown_enter_18_listener($event) {\n            $event.preventDefault();\n            return ctx.sendPrompt();\n          });\n          i0.ɵɵtext(19, \"      \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(20, \"button\", 12);\n          i0.ɵɵlistener(\"click\", function DashboardComponent_Template_button_click_20_listener() {\n            return ctx.sendPrompt();\n          });\n          i0.ɵɵtext(21);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵtemplate(22, DashboardComponent_div_22_Template, 5, 1, \"div\", 13);\n          i0.ɵɵelementEnd()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"ngIf\", ctx.user == null ? null : ctx.user.photo);\n          i0.ɵɵadvance(3);\n          i0.ɵɵtextInterpolate1(\"Bem-vindo, \", ctx.user == null ? null : ctx.user.displayName, \"!\");\n          i0.ɵɵadvance(2);\n          i0.ɵɵtextInterpolate(ctx.user == null ? null : ctx.user.email);\n          i0.ɵɵadvance(7);\n          i0.ɵɵproperty(\"ngModel\", ctx.selectedAI);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngForOf\", ctx.ais);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"ngModel\", ctx.prompt);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"disabled\", ctx.loading || !ctx.prompt.trim());\n          i0.ɵɵadvance(1);\n          i0.ɵɵtextInterpolate1(\" \", ctx.loading ? \"Processando...\" : \"Enviar\", \" \");\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.response);\n        }\n      },\n      dependencies: [i4.NgForOf, i4.NgIf, i5.NgSelectOption, i5.ɵNgSelectMultipleOption, i5.DefaultValueAccessor, i5.SelectControlValueAccessor, i5.NgControlStatus, i5.NgModel, i4.UpperCasePipe],\n      styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n    });\n  }\n}","map":{"version":3,"mappings":"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","names":["i0","DashboardComponent","constructor","authService","router","http","ngOnInit","isAuthenticated","navigate","loadUserInfo","loadAIs","get","withCredentials","subscribe","next","response","user","error","logout","ais","console","sendPrompt","prompt","trim","loading","post","ai","selectedAI","resposta","selectors","decls","vars","consts","template","ctx","$event"],"sourceRoot":"","sources":["/Users/marcato/Local_Juliano/PO/po-chatgpt/frontend/src/app/dashboard/dashboard.component.html","/Users/marcato/Local_Juliano/PO/po-chatgpt/frontend/src/app/dashboard/dashboard.component.ts"],"sourcesContent":["<!-- dashboard.component.html -->\n<div class=\"dashboard-container\">\n  <!-- Header -->\n  <header class=\"dashboard-header\">\n    <div class=\"user-info\">\n      <img [src]=\"user?.photo\" alt=\"User Photo\" class=\"user-photo\" *ngIf=\"user?.photo\">\n      <div>\n        <h2>Bem-vindo, {{ user?.displayName }}!</h2>\n        <p>{{ user?.email }}</p>\n      </div>\n    </div>\n    <button (click)=\"logout()\" class=\"logout-btn\">Sair</button>\n  </header>\n\n  <!-- Chat Interface -->\n  <div class=\"chat-container\">\n    <div class=\"ai-selector\">\n      <label for=\"ai-select\">Selecione a IA:</label>\n      <select id=\"ai-select\" [(ngModel)]=\"selectedAI\">\n        <option *ngFor=\"let ai of ais\" [value]=\"ai\">{{ ai | uppercase }}</option>\n      </select>\n    </div>\n\n    <div class=\"prompt-input\">\n      <textarea \n        [(ngModel)]=\"prompt\" \n        placeholder=\"Digite seu prompt aqui...\"\n        rows=\"4\"\n        (keydown.enter)=\"$event.preventDefault(); sendPrompt()\">\n      </textarea>\n      <button (click)=\"sendPrompt()\" [disabled]=\"loading || !prompt.trim()\">\n        {{ loading ? 'Processando...' : 'Enviar' }}\n      </button>\n    </div>\n\n    <!-- Response -->\n    <div class=\"response-container\" *ngIf=\"response\">\n      <h3>Resposta:</h3>\n      <div class=\"response-content\">\n        {{ response }}\n      </div>\n    </div>\n  </div>\n</div>","// dashboard.component.ts - COMPLETO\nimport { Component, OnInit } from '@angular/core';\nimport { AuthService } from '../auth.service';\nimport { Router } from '@angular/router';\nimport { HttpClient } from '@angular/common/http';\n\n@Component({\n  selector: 'app-dashboard',\n  templateUrl: './dashboard.component.html',\n  styleUrls: ['./dashboard.component.css']\n})\nexport class DashboardComponent implements OnInit {\n  user: any;\n  ais: any[] = [];\n  prompt: string = '';\n  selectedAI: string = 'gpt';\n  response: string = '';\n  loading: boolean = false;\n\n  constructor(\n    private authService: AuthService,\n    private router: Router,\n    private http: HttpClient\n  ) {}\n\n  ngOnInit() {\n    if (!this.authService.isAuthenticated()) {\n      this.router.navigate(['/login']);\n    }\n    \n    this.loadUserInfo();\n    this.loadAIs();\n  }\n\n  loadUserInfo() {\n    this.http.get<any>('http://localhost:3000/api/user', \n      { withCredentials: true }\n    ).subscribe({\n      next: (response) => {\n        this.user = response.user;\n      },\n      error: () => {\n        this.authService.logout();\n      }\n    });\n  }\n\n  loadAIs() {\n    this.http.get<any>('http://localhost:3000/api/ais',\n      { withCredentials: true }\n    ).subscribe({\n      next: (response) => {\n        this.ais = response.ais;\n      },\n      error: (error) => {\n        console.error('Error loading AIs:', error);\n      }\n    });\n  }\n\n  sendPrompt() {\n    if (!this.prompt.trim()) return;\n\n    this.loading = true;\n    this.response = '';\n\n    this.http.post<any>('http://localhost:3000/api/prompt',\n      { prompt: this.prompt, ai: this.selectedAI },\n      { withCredentials: true }\n    ).subscribe({\n      next: (response) => {\n        this.response = response.resposta;\n        this.loading = false;\n      },\n      error: (error) => {\n        console.error('Error:', error);\n        this.response = 'Erro ao processar a solicitação';\n        this.loading = false;\n      }\n    });\n  }\n\n  logout() {\n    this.authService.logout();\n  }\n}"]},"metadata":{},"sourceType":"module","externalDependencies":[]}